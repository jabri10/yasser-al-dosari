<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3D Interactive Globe with Real-time Data</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    #info {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 10px;
      border-radius: 5px;
      font-family: Arial, sans-serif;
      font-size: 14px;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
  <div id="info">Hover over a country to see its details.</div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script>
    // Setup basic Three.js scene
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // Add a sphere to represent the Earth
    const geometry = new THREE.SphereGeometry(3, 50, 50);
    const texture = new THREE.TextureLoader().load('https://upload.wikimedia.org/wikipedia/commons/9/9f/Earth_PNG42.png'); // Earth texture
    const material = new THREE.MeshBasicMaterial({
      map: texture,
    });
    const earth = new THREE.Mesh(geometry, material);
    scene.add(earth);

    // Add a light source
    const light = new THREE.AmbientLight(0x404040);  // Ambient light
    scene.add(light);

    // Position camera
    camera.position.z = 5;

    // Load the country data
    const countryData = {};
    async function loadCountryData() {
      const response = await fetch('https://restcountries.com/v3.1/all');
      const data = await response.json();
      data.forEach(country => {
        countryData[country.cca3] = {
          name: country.name.common,
          population: country.population,
          area: country.area,
          latlng: country.latlng,
        };
      });
    }

    // Create a marker for each country
    async function createCountryMarkers() {
      const markerGeometry = new THREE.SphereGeometry(0.05, 16, 16);
      const markerMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });

      const countries = [
        { name: 'USA', lat: 37.0902, lon: -95.7129 }, // Example coordinates
        { name: 'Brazil', lat: -14.2350, lon: -51.9253 },
        { name: 'Australia', lat: -25.2744, lon: 133.7751 }
      ];

      countries.forEach(country => {
        const marker = new THREE.Mesh(markerGeometry, markerMaterial);
        const { lat, lon } = country;
        const phi = (90 - lat) * (Math.PI / 180);
        const theta = (lon + 180) * (Math.PI / 180);

        marker.position.x = 3 * Math.sin(phi) * Math.cos(theta);
        marker.position.y = 3 * Math.cos(phi);
        marker.position.z = 3 * Math.sin(phi) * Math.sin(theta);

        marker.userData = country; // Store country data on marker
        scene.add(marker);
      });
    }

    // Handle hover effects
    let raycaster = new THREE.Raycaster();
    let mouse = new THREE.Vector2();
    let intersects = [];

    function onMouseMove(event) {
      mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
    }

    function updateHoverInfo() {
      raycaster.update();
      raycaster.setFromCamera(mouse, camera);
      intersects = raycaster.intersectObjects(scene.children);

      if (intersects.length > 0) {
        const countryMarker = intersects[0].object;
        const country = countryMarker.userData;
        const countryDetails = countryData[country.name];

        document.getElementById('info').textContent = `
          Country: ${countryDetails.name}
          Population: ${countryDetails.population}
          Area: ${countryDetails.area} kmÂ²
        `;
      } else {
        document.getElementById('info').textContent = 'Hover over a country to see its details.';
      }
    }

    window.addEventListener('mousemove', onMouseMove, false);

    // Rendering loop
    function animate() {
      requestAnimationFrame(animate);
      earth.rotation.y += 0.002;

      updateHoverInfo();
      renderer.render(scene, camera);
    }

    // Initialize and load data
    loadCountryData().then(() => {
      createCountryMarkers();
      animate();
    });
  </script>
</body>
</html>


